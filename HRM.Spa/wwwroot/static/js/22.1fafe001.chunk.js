(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1008:function(e,t,n){"use strict";n.r(t),n.d(t,"ReactDesktopFileImage",function(){return h});var o=n(1),i=n(0),r=n(122),s=n.n(r),a=n(581),p=n.n(a),u=n(607),l=n(27),c=n(538),f=n(608),d=n(30),m=function(e){function t(t){var n=e.call(this,t)||this;return n.contextMenuRef=i.createRef(),n.onClick=function(){n.setState(function(e){return o.a({},e,{isContextMenuVisible:!0})}),n.contextMenuRef.current.instance.show(),n.props.onMenuVisibleChange({visible:!0})},n.onContextHiding=function(){n.setState(function(e){return o.a({},e,{isContextMenuVisible:!1})}),n.props.onMenuVisibleChange({visible:!1})},n.onItemClick=function(e){n.contextMenuRef.current.instance.hide(),e.itemData.itemClick(e)},n.position={my:"right top",at:"right bottom"},n.state={isContextMenuVisible:!1},n}return o.c(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.items,o=this.props.visible||this.state.isContextMenuVisible;return i.createElement(i.Fragment,null,i.createElement(s.a,{icon:t,onClick:this.onClick,type:"default",visible:o}),i.createElement(p.a,{items:n,ref:this.contextMenuRef,onHiding:this.onContextHiding,onItemClick:this.onItemClick,showEvent:"none",closeOnOutsideClick:!0,target:this.props.containerElement.current,position:this.position}))},t}(i.PureComponent),y=Object(l.a)({main:{position:"relative",overflow:"hidden",display:"table-cell","& .dx-button":{position:"absolute",top:2,right:2},"&.xaf-file-image-border":o.a({},u.a,{backgroundColor:"transparent"})}}),h=function(e){function t(t){var n=e.call(this,t)||this;return n.getMenuItems=Object(d.createSelector)([function(e){return e}],function(e){return[{text:"Change",icon:"image",itemClick:function(e){n.openDialog(e)}},{text:"Remove",icon:"trash",itemClick:e}]}),n.openDialog=function(e){n.fileInputRef.current.open(e)},n.fileInputRef=i.createRef(),n.containerRef=i.createRef(),n.setHover=function(){n.setState(function(e){return o.a({},e,{isHover:!0})})},n.setUnhover=function(){n.setState(function(e){return o.a({},e,{isHover:!1})})},n.onMenuVisibleChange=function(e){var t=e.visible;n.setState(function(e){return o.a({},e,{isMenuVisible:t})})},n.state={isMenuVisible:!1},n}return o.c(t,e),t.prototype.render=function(){var e=this;return i.createElement(y,{className:this.props.className},function(t){var n=e.state.isHover||e.state.isMenuVisible?" dx-state-focused":"";return i.createElement("div",{style:e.props.style,className:t.main+" "+n+"  dx-texteditor dx-editor-filled dx-widget xaf-file-image-border",onMouseEnter:e.setHover,onMouseLeave:e.setUnhover},i.createElement(f.a,{src:e.props.src,value:e.props.value,onValueChanged:e.props.onValueChanged,containerRef:e.containerRef},function(t){var n=t.isEmpty,o=t.updateValue,r=t.clearValue;if(e.props.readOnly)return null;var a=n?i.createElement(s.a,{icon:"upload",visible:e.state.isHover,onClick:e.openDialog,type:"default"}):i.createElement(m,{onMenuVisibleChange:e.onMenuVisibleChange,icon:"overflow",visible:e.state.isHover,items:e.getMenuItems(r),containerElement:e.containerRef});return i.createElement(i.Fragment,null,i.createElement(c.a,{onFileSelected:o,ref:e.fileInputRef}),a)}))})},t}(i.PureComponent)},538:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var o=n(1),i=n(0),r=/image.*/;function s(e,t){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsDataURL(e)}var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fileInputRef=i.createRef(),t.open=function(e){e.event.stopPropagation(),t.fileInputRef.current.click()},t.fileSelected=function(e){var n=function(e){for(var t=e.files,n=0;n<t.length;n++){var o=t[n];if(o.type.match(r))return o}return null}(e.target);e.target.value=null,s(n,function(e){t.props.onFileSelected({dataUrl:e,file:n})})},t}return o.c(t,e),t.prototype.render=function(){return i.createElement("input",{type:"file",accept:"image/x",style:{display:"none"},onChange:this.fileSelected,ref:this.fileInputRef})},t}(i.PureComponent)},581:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(504),r=n(3),s=n(98),a=n(114),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._WidgetClass=i.default,t._defaults={defaultItems:"items",defaultSelectedItem:"selectedItem",defaultVisible:"visible"},t._expectedChildren={animation:{optionName:"animation",isCollectionItem:!1},item:{optionName:"items",isCollectionItem:!0},position:{optionName:"position",isCollectionItem:!1},showEvent:{optionName:"showEvent",isCollectionItem:!1},showSubmenuMode:{optionName:"showSubmenuMode",isCollectionItem:!1}},t._templateProps=[{tmplOption:"itemTemplate",render:"itemRender",component:"itemComponent",keyFn:"itemKeyFn"}],t}return o(t,e),Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t}(s.Component);t.ContextMenu=p,p.propTypes={accessKey:r.PropTypes.string,activeStateEnabled:r.PropTypes.bool,animation:r.PropTypes.object,closeOnOutsideClick:r.PropTypes.oneOfType([r.PropTypes.bool,r.PropTypes.func]),cssClass:r.PropTypes.string,dataSource:r.PropTypes.oneOfType([r.PropTypes.array,r.PropTypes.object,r.PropTypes.string]),disabled:r.PropTypes.bool,disabledExpr:r.PropTypes.oneOfType([r.PropTypes.func,r.PropTypes.string]),displayExpr:r.PropTypes.oneOfType([r.PropTypes.func,r.PropTypes.string]),elementAttr:r.PropTypes.object,focusStateEnabled:r.PropTypes.bool,height:r.PropTypes.oneOfType([r.PropTypes.func,r.PropTypes.number,r.PropTypes.string]),hint:r.PropTypes.string,hoverStateEnabled:r.PropTypes.bool,items:r.PropTypes.array,itemsExpr:r.PropTypes.oneOfType([r.PropTypes.func,r.PropTypes.string]),onContentReady:r.PropTypes.func,onDisposing:r.PropTypes.func,onHidden:r.PropTypes.func,onHiding:r.PropTypes.func,onInitialized:r.PropTypes.func,onItemClick:r.PropTypes.oneOfType([r.PropTypes.func,r.PropTypes.string]),onItemContextMenu:r.PropTypes.func,onItemRendered:r.PropTypes.func,onOptionChanged:r.PropTypes.func,onPositioning:r.PropTypes.func,onSelectionChanged:r.PropTypes.func,onShowing:r.PropTypes.func,onShown:r.PropTypes.func,position:r.PropTypes.object,rtlEnabled:r.PropTypes.bool,selectByClick:r.PropTypes.bool,selectedExpr:r.PropTypes.oneOfType([r.PropTypes.func,r.PropTypes.string]),selectedItem:r.PropTypes.object,selectionMode:r.PropTypes.oneOf(["none","single"]),showEvent:r.PropTypes.oneOfType([r.PropTypes.object,r.PropTypes.string]),showSubmenuMode:r.PropTypes.oneOfType([r.PropTypes.object,r.PropTypes.oneOf(["onClick","onHover"])]),submenuDirection:r.PropTypes.oneOf(["auto","left","right"]),tabIndex:r.PropTypes.number,visible:r.PropTypes.bool,width:r.PropTypes.oneOfType([r.PropTypes.func,r.PropTypes.number,r.PropTypes.string])};var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="animation",t.ExpectedChildren={hide:{optionName:"hide",isCollectionItem:!1},show:{optionName:"show",isCollectionItem:!1}},t}(a.default);t.Animation=u;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="at",t}(a.default);t.At=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="boundaryOffset",t}(a.default);t.BoundaryOffset=c;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="collision",t}(a.default);t.Collision=f;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="delay",t}(a.default);t.Delay=d;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="hide",t}(a.default);t.Hide=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="items",t.IsCollectionItem=!0,t.TemplateProps=[{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],t}(a.default);t.Item=y;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="my",t}(a.default);t.My=h;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="offset",t}(a.default);t.Offset=g;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="position",t.ExpectedChildren={at:{optionName:"at",isCollectionItem:!1},boundaryOffset:{optionName:"boundaryOffset",isCollectionItem:!1},collision:{optionName:"collision",isCollectionItem:!1},my:{optionName:"my",isCollectionItem:!1},offset:{optionName:"offset",isCollectionItem:!1}},t}(a.default);t.Position=b;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="show",t}(a.default);t.Show=v;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="showEvent",t}(a.default);t.ShowEvent=C;var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.OptionName="showSubmenuMode",t.ExpectedChildren={delay:{optionName:"delay",isCollectionItem:!1}},t}(a.default);t.ShowSubmenuMode=I,t.default=p},607:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={border:"1px solid #ddd"}},608:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n(1),i=n(0),r=n(538),s=n(27),a=Object(s.a)({main:{minHeight:"120px",minWidth:"96px"},image:{height:"inherit",width:"inherit",overflow:"hidden",display:"block"}}),p=function(e){function t(t){var n=e.call(this,t)||this;return n.containerRef=i.createRef(),n.onImageError=function(){n.setState(function(e){return o.a({},e,{errorUrl:n.props.src})})},n.onValueChanged=function(e){return n.props.onValueChanged&&n.props.onValueChanged(e)},n.updateValue=function(e){var t=e.file;n.props.value!==t&&n.onValueChanged({value:t}),n.setState(function(t){return o.a({},t,{imageValue:e})})},n.clearValue=function(){n.setState(function(e){return o.a({},e,{ignoredSrc:n.props.src})}),n.onValueChanged({value:null})},n.onClick=function(e){!0!==n.props.readOnly&&n.props.onEditFileRequest&&n.props.onEditFileRequest({event:e})},n.state={},n}return o.c(t,e),t.prototype.componentDidMount=function(){this.syncValueWithDataUrl()},t.prototype.syncValueWithDataUrl=function(){var e=this;null!==this.props.value&&this.props.value!==(this.state.imageValue&&this.state.imageValue.file)&&Object(r.b)(this.props.value,function(t){e.updateValue({dataUrl:t,file:e.props.value})})},t.prototype.getImageSrc=function(e,t){var n=e.src,o=e.value,i=t.imageValue,r=t.errorUrl,s=t.ignoredSrc;return null!==o&&i&&o===i.file?i.dataUrl:r===n||s===n?null:n},t.prototype.render=function(){var e=this,t=this.getImageSrc(this.props,this.state),n=!t,o=n?"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIxMjBweCIgaGVpZ2h0PSIxMjBweCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyMCAxMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBvcGFjaXR5PSIwLjE1IiBmaWxsPSIjOUI5QjlCIiBwb2ludHM9IjkwLjIsMzQuOCA0My43LDgxLjMgMjQuOSw2Mi41IDAsODcuNCAwLDEyMCAxMjAsMTIwIDEyMCw2NC41ICIvPgo8Y2lyY2xlIG9wYWNpdHk9IjAuMTUiIGZpbGw9IiM5QjlCOUIiIGN4PSIzOS4yIiBjeT0iMzIuNCIgcj0iMTIiLz4KPC9zdmc+Cg==":t;return i.createElement(a,null,function(r){return i.createElement(i.Fragment,null,i.createElement("img",{className:r.main+" "+r.image+" image-border-radius",src:o,onError:e.onImageError,onClick:e.onClick,ref:e.props.containerRef}),e.props.children({isEmpty:n,imageSrc:t,updateValue:e.updateValue,clearValue:e.clearValue}))})},t.defaultProps={value:null},t}(i.PureComponent)}}]);
//# sourceMappingURL=22.1fafe001.chunk.js.map